<div class="modal-header">
  <h5 class="modal-title">{{ titulopant }}</h5>
  <button type="button" class="btn-close" (click)="cerrarModal()"></button>
</div>

<div class="modal-body">
  <div class="row">
    <div class="col-12">
      <div class="card card-animate" *ngIf="showGuardararchivo">
        <div class="card-body text-center">
          <h5 class="fs-15 mb-3">Subir archivo de custodia</h5>
          <div class="input-group">
            <input type="file" class="form-control" (change)="onFileSelected($event)" accept=".pdf" />
          </div>
          <div class="mt-2 small text-muted" *ngIf="selectedFile">
            Seleccionado: {{ selectedFile?.name }}
          </div>
        </div>
      </div>

      <div class="card card-animate" *ngIf="showArc">
        <div class="card-body text-center">
          <div class="ratio ratio-16x9 mb-3 position-relative" *ngIf="showArc">
            <div
              *ngIf="loading"
              class="d-flex align-items-center justify-content-center position-absolute top-0 start-0 w-100 h-100 bg-white bg-opacity-75"
              style="z-index: 10;"
            >
              <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Cargando...</span>
              </div>
            </div>

            <iframe
              *ngIf="safeUrl"
              [src]="safeUrl"
              style="border: 0; width: 100%; height: 100%;"
              loading="eager"
              allowfullscreen
            ></iframe>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal-footer">
  <button
    *ngIf="showGuardararchivo"
    class="btn btn-success btn-sm"
    (click)="guardarArchivo()"
    [disabled]="!selectedFile || uploading"
  >
    <i class="bx bx-log-in"></i>
    {{ uploading ? 'Guardando...' : 'Guardar Archivo' }}
  </button>

  <button *ngIf="showArc" class="btn btn-warning btn-sm" (click)="anular()">
    <i class="bx bx-trash"></i> Anular Custodia
  </button>

  <button class="btn btn-danger btn-sm" (click)="cerrarModal()">
    <i class="bx bx-x"></i> Cancelar
  </button>
</div>
